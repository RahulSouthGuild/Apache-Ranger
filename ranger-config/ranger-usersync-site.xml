<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>
    <!-- LDAP Sync Source Configuration -->
    <property>
        <name>ranger.usersync.source.impl.class</name>
        <value>org.apache.ranger.ldapusersync.process.LdapUserGroupBuilder</value>
    </property>

    <!-- LDAP Connection Settings -->
    <property>
        <name>ranger.usersync.ldap.url</name>
        <value>ldap://openldap:389</value>
    </property>

    <property>
        <name>ranger.usersync.ldap.binddn</name>
        <value>cn=admin,dc=example,dc=com</value>
    </property>

    <property>
        <name>ranger.usersync.ldap.ldapbindpassword</name>
        <value>admin123</value>
    </property>

    <property>
        <name>ranger.usersync.ldap.searchBase</name>
        <value>dc=example,dc=com</value>
    </property>

    <!-- User Search Configuration -->
    <property>
        <name>ranger.usersync.ldap.user.searchbase</name>
        <value>ou=users,dc=example,dc=com</value>
    </property>

    <property>
        <name>ranger.usersync.ldap.user.searchscope</name>
        <value>sub</value>
    </property>

    <property>
        <name>ranger.usersync.ldap.user.objectclass</name>
        <value>inetOrgPerson</value>
    </property>

    <property>
        <name>ranger.usersync.ldap.user.searchfilter</name>
        <value>(objectClass=inetOrgPerson)</value>
    </property>

    <property>
        <name>ranger.usersync.ldap.user.nameattribute</name>
        <value>uid</value>
    </property>

    <property>
        <name>ranger.usersync.ldap.user.groupnameattribute</name>
        <value>memberof,ismemberof</value>
    </property>

    <!-- Group Search Configuration -->
    <property>
        <name>ranger.usersync.group.searchenabled</name>
        <value>true</value>
    </property>

    <property>
        <name>ranger.usersync.group.searchbase</name>
        <value>ou=groups,dc=example,dc=com</value>
    </property>

    <property>
        <name>ranger.usersync.group.searchscope</name>
        <value>sub</value>
    </property>

    <property>
        <name>ranger.usersync.group.objectclass</name>
        <value>posixGroup</value>
    </property>

    <property>
        <name>ranger.usersync.group.searchfilter</name>
        <value>(objectClass=posixGroup)</value>
    </property>

    <property>
        <name>ranger.usersync.group.nameattribute</name>
        <value>cn</value>
    </property>

    <property>
        <name>ranger.usersync.group.memberattributename</name>
        <value>memberUid</value>
    </property>

    <!-- Enable Group User Map Sync -->
    <property>
        <name>ranger.usersync.group.usermapsyncenabled</name>
        <value>true</value>
    </property>

    <!-- Sync Interval (in seconds) -->
    <property>
        <name>ranger.usersync.sleeptimeinmillisbetweensynccycle</name>
        <value>300000</value> <!-- 5 minutes -->
    </property>

    <!-- Ranger Admin Connection -->
    <property>
        <name>ranger.usersync.policymanager.baseurl</name>
        <value>http://ranger:6080</value>
    </property>

    <property>
        <name>ranger.usersync.policymanager.username</name>
        <value>rangerusersync</value>
    </property>

    <property>
        <name>ranger.usersync.policymanager.password</name>
        <value>rangerusersync</value>
    </property>

    <!-- SSL Configuration (disabled for now) -->
    <property>
        <name>ranger.usersync.ldap.starttls</name>
        <value>false</value>
    </property>

    <!-- Incremental Sync -->
    <property>
        <name>ranger.usersync.ldap.deltasync</name>
        <value>true</value>
    </property>

    <!-- Paged Results -->
    <property>
        <name>ranger.usersync.pagedresultsenabled</name>
        <value>true</value>
    </property>

    <property>
        <name>ranger.usersync.pagedresultssize</name>
        <value>500</value>
    </property>

    <!-- User/Group Filtering -->
    <property>
        <name>ranger.usersync.user.searchenabled</name>
        <value>true</value>
    </property>

    <!-- Enable Debug Logging -->
    <property>
        <name>ranger.usersync.logdir</name>
        <value>/var/log/ranger/usersync</value>
    </property>

    <!-- Username Case Conversion -->
    <property>
        <name>ranger.usersync.ldap.username.caseconversion</name>
        <value>none</value>
    </property>

    <property>
        <name>ranger.usersync.ldap.groupname.caseconversion</name>
        <value>none</value>
    </property>
</configuration>