# Doris LDAP Configuration File
# This file configures LDAP authentication for Apache Doris

# LDAP Server Configuration
ldap_host = openldap
ldap_port = 389

# LDAP Admin Credentials (for binding)
ldap_admin_dn = cn=admin,dc=example,dc=com
ldap_admin_password = admin123

# User Search Configuration
ldap_user_base_dn = ou=users,dc=example,dc=com
ldap_user_filter = (&(objectClass=inetOrgPerson)(uid={login}))
ldap_user_name_attribute = uid

# Group Search Configuration (for role mapping)
ldap_group_base_dn = ou=groups,dc=example,dc=com
ldap_group_filter = (&(objectClass=posixGroup)(memberUid={user}))
ldap_group_name_attribute = cn

# Cache Configuration
ldap_user_cache_enabled = true
# Cache timeout: 12 hours
ldap_user_cache_timeout_s = 43200

# Connection Pool Configuration
ldap_connection_pool_size = 10
ldap_connection_timeout_ms = 5000

# LDAP Default Role
# All LDAP users will have this role by default
ldap_default_role = ldapDefaultRole

# Enable Group-to-Role Mapping
# Map LDAP groups to Doris roles (group name must match role name)
ldap_group_to_role_mapping = true

# Role Mappings (LDAP Group -> Doris Role)
# Format: ldap_group_name:doris_role_name
# These mappings will be processed dynamically
role_mapping.admins = admin
role_mapping.data-analysts = analyst
role_mapping.users = user
role_mapping.ranger-admins = admin

# SSL/TLS Configuration (disabled for now, using plaintext)
ldap_use_ssl = false
ldap_use_starttls = false

# Debugging
ldap_debug_enabled = true